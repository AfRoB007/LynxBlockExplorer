<section class="block-explorer-section section bg-bottom"><div class="container"><div class="row"><div class="col-lg-8"><div class="center-heading"><h2 class="section-title">{{translation.pages.top_100.richlist.heading}}</h2></div></div><div class="col-lg-4"><div class="center-heading"><h2 class="section-title">{{translation.pages.top_100.distribution.heading}}</h2></div></div></div><div class="row"><div class="col-lg-8"><div class="table-responsive"><table class="table table-striped table-latests"><thead><tr><td>{{translation.pages.top_100.richlist.columns.rank}}</td><td>{{translation.pages.top_100.richlist.columns.address}}</td><td>{{translation.pages.top_100.richlist.columns.amount}}</td><td>{{translation.pages.top_100.richlist.columns.percent}}</td></tr></thead><tbody><tr><td colspan="4" class="text-center">{{translation.common.table.loading}}</td></tr></tbody><tfoot></tfoot></table></div></div><div class="col-lg-4"><div class="table-responsive"><table class="table table-bordered table-distribution"><colgroup><col width="35%"><col width="50%"><col width="15%"></colgroup><thead><tr><th></th><th>{{translation.pages.top_100.distribution.columns.amount}} (LYNX)</th><th class="text-center">%</th></tr></thead><tbody><tr><td class="text-center" colspan="3">{{translation.common.table.loading}}</td></tr></tbody></table></div><canvas id="chart" width="400" height="400"></canvas></div></div></div></section>{{#section 'script'}}<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script><script type="text/javascript">$(function(){var t=new function(){this.data=null,this.pagination={pageIndex:1,pageSize:25,count:0},this.selector={tbody:$(".table-latests tbody"),tfoot:$(".table-latests tfoot"),pageInfo:null,pagination:null},this.getStartIndex=function(){return(this.pagination.pageIndex-1)*this.pagination.pageSize+1},this.getEndIndex=function(){var t=this.pagination.pageIndex*this.pagination.pageSize;return t<this.pagination.count?t:this.pagination.count},this.load=function(){let t=this;$.ajax({url:"/data/richlist",type:"GET",contentType:"application/json",dataType:"json"}).done(function(a){t.data=a,t.pagination.count=t.data.richlist.balance.length,t.render(),t.makeProgress()}).always(function(){t.renderDistribution(),t.renderChart(),t.paginate()})},this.render=function(){let t=this,a=t.data.richlist.balance,n="";var e=t.pagination.pageSize*t.pagination.pageIndex-t.pagination.pageSize,o=t.pagination.pageSize*t.pagination.pageIndex;for(t.pagination.count<o&&(o=t.pagination.count);e<o;e++){var i=a[e];let o="<tr>";o+="<td>"+(e+1)+"</td>",o+='<td><a href="/address/'+i.a_id+'">'+i.a_id+"</a></td>",o+="<td>"+t._formatAmount(i.balance/1e8)+"</td>",o+="<td>"+t._getPercentOfCoins(i)+"</td>",n+=o+="</tr>"}this.selector.tbody.html(n)},this.renderDistribution=function(){var t=$(".table-distribution tbody");if(this.data&&this.data.distribution){var a=this.data.distribution,n="",e=0;[a.top_1_25,a.top_26_50,a.top_51_75,a.top_76_100].forEach(function(t,a){e+=parseFloat(t.percent),n+="<tr>",n+='<td><i style="color:'+t.bgColor+'" class="fa fa-square mr-1"></i>'+t.label+"</td>",n+="<td>"+parseFloat(t.total).toFixed(4)+"</td>",n+='<td class="text-right">'+parseFloat(t.percent).toFixed(2)+"</td>",n+="</tr>"}),n+="<tr>",n+="<td>Total</td>",n+="<td></td>",n+='<td class="text-right">'+e.toFixed(2)+"</td>",n+="</tr>";var o=a.top_100_plus;n+="<tr>",n+='<td><i style="color:'+o.bgColor+'" class="fa fa-square mr-1"></i>'+o.label+"</td>",n+="<td>"+parseFloat(o.total).toFixed(4)+"</td>",n+='<td class="text-right">'+parseFloat(o.percent).toFixed(2)+"</td>",n+="</tr>",t.html(n)}else t.html('<tr><td class="text-center" colspan="3">{{translation.common.table.no_item_found}}</td></tr>')},this.renderChart=function(){if(this.data){var t=this.data.distribution,a=[],n=[],e=[],o=[];[t.top_1_25,t.top_26_50,t.top_51_75,t.top_76_100,t.top_100_plus].forEach(function(t){a.push(parseFloat(t.percent).toFixed(2)),e.push(t.bgColor),o.push(t.bgColor),n.push(t.label)});var i=document.getElementById("chart").getContext("2d");new Chart(i,{type:"doughnut",data:{datasets:[{data:a,backgroundColor:e,borderColor:o,borderWidth:1}],labels:n},options:{legend:{display:!1}}})}},this.paginate=function(){var t=this;this.pagination.count>0?(0===$(".table-latests tfoot .page-info").length&&(this.selector.tfoot.html('<tr><td colspan="4"><p class="page-info"></p><ul class="pagination pull-right"></ul></td></tr>'),this.selector.pageInfo=$(".table-latests tfoot .page-info"),this.selector.pagination=$(".table-latests tfoot .pagination")),setTimeout(function(){t.selector.pagination.twbsPagination({totalPages:Math.ceil(t.pagination.count/t.pagination.pageSize),onPageClick:function(a,n){t.pagination.pageIndex=n,t.render()},first:"{{translation.common.table.pagination.first}}",prev:"{{translation.common.table.pagination.previous}}",next:"{{translation.common.table.pagination.next}}",last:"{{translation.common.table.pagination.last}}"}),t.updatePageInfo()},1e3)):this.selector.tbody.html('<tr><td class="text-center" colspan="4">{{translation.common.table.no_item_found}}</td></tr>')},this.updatePageInfo=function(){var t="{{translation.common.table.pagination.showing}} "+this.getStartIndex()+" {{translation.common.table.pagination.to}} "+this.getEndIndex()+" {{translation.common.table.pagination.of}} "+this.pagination.count+" {{translation.common.table.pagination.entries}}";this.selector.pageInfo.html(t)},this.makeProgress=function(){$(".table-latests").find(".table-progress").each(function(t){let a=$(".table-progress:eq("+[t]+") .progress-line").data("value");$(".table-progress:eq("+[t]+") .progress-line").css("width",parseInt(a,10)+parseInt(a,10)+"%")})},this._getPercentOfCoins=function(t){let a=this.data.stats,n=(t.balance/1e8/a.supply*100).toFixed(2),e='<div class="table-progress">';return e+='<div class="progress-line" data-value="'+n+'"></div>',e+="<span>"+n+" %</span>",e+="</div>"},this._formatAmount=function(t){return t.toLocaleString()}};t.load(),setInterval(function(){t.load()},6e4)});</script>{{/section}}